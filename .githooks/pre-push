#!/bin/bash

echo "ğŸ§ª Running unit tests before push..."

./gradlew testDevDebugUnitTest

UNIT_TEST_STATUS=$?

echo "ğŸ“± Running instrumented (Android) tests before push..."

./gradlew connectedDevDebugAndroidTest

ANDROID_TEST_STATUS=$?

if [ $UNIT_TEST_STATUS -ne 0 ] || [ $ANDROID_TEST_STATUS -ne 0 ]; then
  echo "âŒ Tests failed. Push aborted."
  exit 1
else
  echo "âœ… All tests passed. Proceeding with push."
fi
